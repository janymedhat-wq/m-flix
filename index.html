<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medhat Films - Cultural Archive</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'ui-sans-serif', 'system-ui', '-apple-system', 'BlinkMacSystemFont', '"Segoe UI"', 'Roboto', '"Helvetica Neue"', 'Arial', '"Noto Sans"', 'sans-serif', '"Apple Color Emoji"', '"Segoe UI Emoji"', '"Segoe UI Symbol"', '"Noto Color Emoji"'],
                    },
                    colors: {
                        'primary-red': '#E50914', /* Netflix Red */
                    }
                }
            }
        }
    </script>
    <style>
        /* Define the theme colors for a high-contrast, minimal aesthetic (DARK MODE DEFAULT) */
        :root {
            --bg-color: #000000;
            --text-color: #ffffff;
            --accent-color: #E50914; /* Red accent for class and focus */
            --overlay-color: rgba(0, 0, 0, 0.98);
            --poster-shadow: 0 10px 30px rgba(255, 255, 255, 0.05); 
            --title-color: #ffffff;
            --subtitle-color: #E50914;
            --border-color: rgba(255, 255, 255, 0.3);
            --search-bg-color: rgba(255, 255, 255, 0.1);
            --search-text-color: #ffffff;
            --search-placeholder-color: rgba(255, 255, 255, 0.5);
            --search-icon-color: rgba(255, 255, 255, 0.5);
        }

        /* LIGHT MODE VARIABLES */
        .light-mode {
            --bg-color: #ffffff;
            --text-color: #1f2937; /* Dark Gray for better contrast */
            --overlay-color: rgba(255, 255, 255, 0.95);
            --poster-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            --title-color: #1f2937;
            --subtitle-color: #E50914;
            --border-color: rgba(0, 0, 0, 0.15);
            --search-bg-color: rgba(0, 0, 0, 0.05);
            --search-text-color: #1f2937;
            --search-placeholder-color: #6b7280;
            --search-icon-color: #6b7280;
        }

        body {
            font-family: var(--font-sans);
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.5s ease, color 0.5s ease;
            padding-top: 100px; 
        }

        /* Update dynamic elements to respect theme colors */
        .header-text { color: var(--text-color); }
        .red-subtitle { color: var(--subtitle-color); }
        .border-y-custom { 
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
        }
        .section-title-border {
            border-bottom: 2px solid var(--border-color);
        }

        /* --- FIXED NAVBAR STYLING (Including the Blur Effect) --- */
        .fixed-navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 100;
            transition: background-color 0.3s ease;
            color: var(--text-color);
        }

        /* Class added by JS when scrolling - DARK MODE SCROLLED */
        .scrolled {
            background-color: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(8px); 
            -webkit-backdrop-filter: blur(8px);
        }

        /* LIGHT MODE SCROLLED */
        .light-mode .scrolled {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px); 
            -webkit-backdrop-filter: blur(8px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .light-mode .scrolled .text-white { /* Ensure fixed text adjusts */
             color: var(--text-color) !important;
        }

        /* === SEARCH BAR VISIBILITY FIX (CRITICAL) === */
        #movieSearchInput {
            background-color: var(--search-bg-color) !important;
            color: var(--search-text-color) !important;
            border-color: var(--search-placeholder-color) !important;
        }

        #movieSearchInput::placeholder {
            color: var(--search-placeholder-color) !important;
        }

        .search-icon {
            color: var(--search-icon-color) !important;
        }
        /* =========================================== */


        /* --- TITLE STYLING (Multi-phase simulation) --- */
        .cultural-title {
            font-family: var(--font-sans);
            font-weight: 900;
            line-height: 1.1;
            overflow: hidden; 
            white-space: nowrap; 
            border-right: 0.15em solid var(--accent-color); /* Red Blinking caret */
            width: 0; 
            animation: 
                blink-caret 0.75s step-end infinite; 
        }

        /* Typewriter keyframes */
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        /* Caret blink keyframes */
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: var(--accent-color); }
        }
        /* Keyframes for smooth transitions in the typewriter effect */
        @keyframes fade-out {
            to { opacity: 0; }
        }

        /* --- MOVIE CARD STYLING & ANIMATION --- */

        /* Keyframes for the staggered entrance animation */
        @keyframes card-entrance {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Wrapper for the card to handle z-index and positioning of the pop-up */
        .card-wrapper {
            transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 1; 
            outline: none; 
            margin-bottom: 2rem; 
            
            /* Staggered entrance animation properties */
            opacity: 0; 
            animation: card-entrance 0.6s ease-out forwards;
        }

        /* Stagger the animation timing using nth-child */
        .card-wrapper:nth-child(1) { animation-delay: 0.1s; }
        .card-wrapper:nth-child(2) { animation-delay: 0.2s; }
        .card-wrapper:nth-child(3) { animation-delay: 0.3s; }
        .card-wrapper:nth-child(4) { animation-delay: 0.4s; }
        .card-wrapper:nth-child(5) { animation-delay: 0.5s; }
        .card-wrapper:nth-child(6) { animation-delay: 0.6s; }
        .card-wrapper:nth-child(7) { animation-delay: 0.7s; }
        .card-wrapper:nth-child(8) { animation-delay: 0.8s; } 

        /* Apply scaling to the poster on hover/focus */
        .card-wrapper:hover,
        .card-wrapper:focus-within {
            transform: scale(1.15); 
            z-index: 50; 
            box-shadow: var(--poster-shadow);
        }
        
        /* Base poster size/shape */
        .movie-card {
            aspect-ratio: 2 / 3; 
            position: relative;
            overflow: hidden;
            cursor: pointer;
            border-radius: 0.5rem; 
            box-shadow: var(--poster-shadow);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .light-mode .movie-card {
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .movie-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: filter 0.3s ease;
        }

        /* Apply a subtle filter on hover based on theme */
        .card-wrapper:hover img,
        .card-wrapper:focus-within img {
            filter: brightness(70%);
        }

        /* --- HORIZONTAL POP-UP PANEL STYLING --- */
        .horizontal-pop-up {
            position: absolute;
            top: 100%; 
            width: 300%; 
            max-width: 1000px; 
            height: 200px; 
            background-color: var(--overlay-color);
            border-radius: 0.5rem;
            border: 2px solid var(--accent-color);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s 0.3s;
            transform: translateY(-20px) scale(0.95); 
            z-index: 60; 
            color: var(--text-color); /* CRITICAL: Uses dynamic text color */
        }

        /* FIX: Ensure description and subtitle text is visible in light mode */
        .horizontal-pop-up p {
            color: var(--text-color) !important;
            opacity: 0.9;
        }

        /* Reveal pop-up on hover/focus */
        .card-wrapper:hover .horizontal-pop-up,
        .card-wrapper:focus-within .horizontal-pop-up {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
            transition: opacity 0.3s ease, transform 0.3s cubic-bezier(0.4, 0, 0.2, 1) 0.1s, visibility 0s;
        }

        /* --- TRANSFORM ORIGIN LOGIC (CRITICAL FOR RESPONSIVENESS) --- */
        
        /* DESKTOP (4 columns) */
        @media (min-width: 768px) {
            .card-wrapper:nth-child(4n + 1) .horizontal-pop-up { left: 0%; }
            .card-wrapper:nth-child(4n + 2) .horizontal-pop-up { left: calc(0% - 100%); }
            .card-wrapper:nth-child(4n + 3) .horizontal-pop-up { left: calc(0% - 200%); }
            .card-wrapper:nth-child(4n + 4) .horizontal-pop-up { left: calc(0% - 250%); }
        }

        /* MOBILE (2 columns) */
        @media (max-width: 767px) { 
             .horizontal-pop-up {
                height: 150px; 
                width: 250%; 
             }
            .card-wrapper:nth-child(2n + 1) .horizontal-pop-up { left: 0%; }
            .card-wrapper:nth-child(2n + 2) .horizontal-pop-up { left: calc(0% - 150%); }
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- FIXED NETFLIX-LIKE NAV BAR WITH BLUR EFFECT -->
    <nav id="fixedNavbar" class="fixed-navbar py-4 px-6 md:px-12 transition duration-300 ease-in-out">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <!-- Logo/Title Area -->
            <div class="flex items-center space-x-2 sm:space-x-4">
                <h1 class="text-3xl font-extrabold text-primary-red">M</h1>
                <span class="hidden sm:inline text-xl font-semibold text-white tracking-wider">MEDHAT FILMS</span>
            </div>
                        
            <!-- Search Bar -->
            <div class="relative w-full max-w-sm md:max-w-md ml-4">
                <!-- Removed text-white/placeholder-white classes here, relying on CSS vars for dynamic styling -->
                <input type="text" id="movieSearchInput" placeholder="Search movies, roles, or years..."
                        class="w-full py-2 pl-4 pr-10 border rounded-full 
                               focus:outline-none focus:ring-2 focus:ring-primary-red focus:border-primary-red transition duration-200 text-sm">
                <!-- Added search-icon class for easy theme targeting -->
                <svg xmlns="http://www.w3.org/2000/svg" class="search-icon h-5 w-5 absolute right-3 top-1/2 transform -translate-y-1/2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                </svg>
            </div>
        </div>
    </nav>

    <!-- Main Content Container (Centered and Max Width) -->
    <div class="max-w-7xl mx-auto space-y-16 sm:space-y-24 p-6 sm:p-12 md:p-16">
        
        <!-- GLOBAL HEADER / TITLE -->
        <header class="text-center pt-8">
            <h1 id="culturalTitle" class="cultural-title text-5xl sm:text-7xl md:text-8xl font-extrabold uppercase mx-auto header-text" style="max-width: fit-content;">
                <!-- Initial text, will be replaced by JS -->
            </h1>
            <p class="text-xl sm:text-3xl font-bold mt-2 mb-10 tracking-widest red-subtitle/70">
                A CULTURAL ARCHIVE OF CINEMATIC WORKS
            </p>
            <p class="text-base sm:text-lg leading-relaxed max-w-3xl mx-auto border-y-custom py-4 px-2 text-white/70">
                EXPLORING IDENTITY, SOCIETY, AND ABSTRACT HUMAN CONNECTION ACROSS GLOBAL CULTURES.
            </p>
        </header>

        <!-- MOVIE GRID SECTION -->
        <section id="movies">
          <center> 
            <h2 class="text-3xl sm:text-4xl font-extrabold tracking-widest header-text mb-8 section-title-border pb-2 inline-block">
                CORE FILMOGRAPHY
            </h2>
          </center>
             <!-- Grid for Movie Posters (Responsive: 2 columns on mobile, 4 on medium/desktop) -->
            <div id="movieGrid" class="grid grid-cols-2 md:grid-cols-4 gap-6 sm:gap-8">
                                
                <!-- MOVIE CARD 1 - "In the Mood for Connection" -->
                <div class="card-wrapper rounded-lg" tabindex="0" data-title="In the Mood for Connection" data-year="2024" data-role="Lead Actor / Producer">
                    <div class="movie-card">
                        <img src="dir.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=CONN'" alt="In the Mood for Connection Poster">
                    </div>
                    <!-- New Horizontal Detail Panel -->
                    <div class="horizontal-pop-up flex p-4 shadow-2xl">
                        <div class="w-2/5 h-full rounded-l-md overflow-hidden mr-4">
                             <img src="dir.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=CONN'" alt="In the Mood for Connection Preview" class="w-full h-full object-cover">
                        </div>
                        <div class="w-3/5 space-y-2">
                            <h3 class="text-xl sm:text-2xl font-bold text-primary-red">IN THE MOOD FOR CONNECTION</h3>
                            <p class="text-xs">2024 (Venice Film Festival) | ROLE: LEAD ACTOR / PRODUCER</p>
                           <p class="text-sm italic">DESCRIPTION: A poetic exploration of two souls adrift in a digitized society, where silence becomes more intimate than words, and every glance carries the weight of a confession.  </p>
                            <button class="px-3 py-1 bg-primary-red text-black font-semibold rounded-full text-xs hover:bg-white transition">
                                VIEW DETAILS
                            </button>
                        </div>
                    </div>
                </div>

                <!-- MOVIE CARD 2 - "American Prometheus" -->
                <div class="card-wrapper rounded-lg" tabindex="0" data-title="American Prometheus" data-year="2023" data-role="Cinematographer">
                    <div class="movie-card">
                        <img src="oppenheimer.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=PROM'" alt="A Life in Pardah Poster">
                    </div>
                    <!-- New Horizontal Detail Panel -->
                    <div class="horizontal-pop-up flex p-4 shadow-2xl">
                        <div class="w-2/5 h-full rounded-l-md overflow-hidden mr-4">
                             <img src="oppenheimer.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=PROM'" alt="American Prometheus Preview" class="w-full h-full object-cover">
                        </div>
                        <div class="w-3/5 space-y-2">
                            <h3 class="text-xl sm:text-2xl font-bold text-primary-red">American Prometheus</h3>
                            <p class="text-xs">2023 (Sundance Grand Jury Prize) | ROLE: CINEMATOGRAPHER</p>
                           <p class="text-sm italic">DESCRIPTION: A powerful documentary dissecting ambition, guilt, and the creation of destructive genius — a meditation on power, science, and the haunting cost of human progress.  </span></p>
                            <button class="px-3 py-1 bg-primary-red text-black font-semibold rounded-full text-xs hover:bg-white transition">
                                VIEW DETAILS
                            </button>
                        </div>
                    </div>
                </div>

                <!-- MOVIE CARD 3 - "A life in Pardah" -->
                <div class="card-wrapper rounded-lg" tabindex="0" data-title="A Life in Pardah" data-year="2022" data-role="Stunt Coordinator">
                    <div class="movie-card">
                        <img src="life.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=PARDAH'" alt="Tokyo Drift Nights Poster">
                    </div>
                    <!-- New Horizontal Detail Panel -->
                    <div class="horizontal-pop-up flex p-4 shadow-2xl">
                        <div class="w-2/5 h-full rounded-l-md overflow-hidden mr-4">
                             <img src="life.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=PARDAH'" alt="Tokyo Drift Nights Preview" class="w-full h-full object-cover">
                        </div>
                        <div class="w-3/5 space-y-2">
                            <h3 class="text-xl sm:text-2xl font-bold text-primary-red">A life in Pardah</h3>
                            <p class="text-xs">2022 | ROLE: STUNT COORDINATOR</p>
                            <p class="text-sm italic">
                               Examine the strict rule of afghan taliban and the woman oppression.
                            </p>
                            <button class="px-3 py-1 bg-primary-red text-black font-semibold rounded-full text-xs hover:bg-white transition">
                                VIEW DETAILS
                            </button>
                        </div>
                    </div>
                </div>

                <!-- MOVIE CARD 4 - "Psychological Neurosis in Pakistan" -->
                <div class="card-wrapper rounded-lg" tabindex="0" data-title="Psychological Neurosis in Pakistan" data-year="2021" data-role="Main Villain">
                    <div class="movie-card">
                        <img src="psycho.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=NEUROSIS'" alt="Psychological Neurosis in Pakistan">
                    </div>
                    <!-- New Horizontal Detail Panel -->
                    <div class="horizontal-pop-up flex p-4 shadow-2xl">
                        <div class="w-2/5 h-full rounded-l-md overflow-hidden mr-4">
                             <img src="psycho.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=NEUROSIS'" alt="Psychological Neurosis in Pakistan Preview" class="w-full h-full object-cover">
                        </div>
                        <div class="w-3/5 space-y-2">
                            <h3 class="text-xl sm:text-2xl font-bold text-primary-red">Psychological Neurosis in Pakistan</h3>
                            <p class="text-xs">2021 | ROLE: MAIN VILLAIN</p>
                           <p class="text-sm italic">DESCRIPTION: A psychological odyssey tracing fractured minds within a crumbling society — exploring identity, faith, and collective madness through cinematic surrealism.
</p>
                            <button class="px-3 py-1 bg-primary-red text-black font-semibold rounded-full text-xs hover:bg-white transition">
                                VIEW DETAILS
                            </button>
                        </div>
                    </div>
                </div>

                <!-- MOVIE CARD 5 - "RAT" -->
                <div class="card-wrapper rounded-lg" tabindex="0" data-title="RAT" data-year="2020" data-role="Voice Actor">
                    <div class="movie-card">
                        <img src="rat.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=RAT'" alt="Ghost in the Machine Poster">
                    </div>
                    <!-- New Horizontal Detail Panel -->
                    <div class="horizontal-pop-up flex p-4 shadow-2xl">
                        <div class="w-2/5 h-full rounded-l-md overflow-hidden mr-4">
                             <img src="rat.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=RAT'" alt="Ghost in the Machine Preview" class="w-full h-full object-cover">
                        </div>
                        <div class="w-3/5 space-y-2">
                            <h3 class="text-xl sm:text-2xl font-bold text-primary-red">RAT</h3>
                            <p class="text-xs">2020 | ROLE: VOICE ACTOR</p>
                            <p class="text-sm italic">
                                DESCRIPTION: Critically acclaimed sci-fi thriller about artificial consciousness and sentience.
                            </p>
                            <button class="px-3 py-1 bg-primary-red text-black font-semibold rounded-full text-xs hover:bg-white transition">
                                VIEW DETAILS
                            </button>
                        </div>
                    </div>
                </div>
                 <div class="horizontal-pop-up flex p-4 shadow-2xl">
                        <div class="w-2/5 h-full rounded-l-md overflow-hidden mr-4">
                             <img src="abdus.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=NEUROSIS'" alt="Psychological Neurosis in Pakistan Preview" class="w-full h-full object-cover">
                        </div>
                        <div class="w-3/5 space-y-2">
                            <h3 class="text-xl sm:text-2xl font-bold text-primary-red">A life in Science</h3>
                            <p class="text-xs">2021 | ROLE: MAIN VILLAIN</p>
                           <p class="text-sm italic">DESCRIPTION: A psychological odyssey tracing fractured minds within a crumbling society — exploring identity, faith, and collective madness through cinematic surrealism.
</p>
                            <button class="px-3 py-1 bg-primary-red text-black font-semibold rounded-full text-xs hover:bg-white transition">
                                VIEW DETAILS
                            </button>
                        </div>
                    </div>
                </div>

                <!-- MOVIE CARD 6 - "REGRET" -->
                <div class="card-wrapper rounded-lg" tabindex="0" data-title="REGRET" data-year="2019" data-role="Director">
                    <div class="movie-card">
                        <img src="ragret.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=REGRET'" alt="Zen of the Arrow Poster">
                    </div>
                    <!-- New Horizontal Detail Panel -->
                    <div class="horizontal-pop-up flex p-4 shadow-2xl">
                        <div class="w-2/5 h-full rounded-l-md overflow-hidden mr-4">
                             <img src="ragret.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=REGRET'" alt="Zen of the Arrow Preview" class="w-full h-full object-cover">
                        </div>
                        <div class="w-3/5 space-y-2">
                            <h3 class="text-xl sm:text-2xl font-bold text-primary-red">REGRET</h3>
                            <p class="text-xs">2019 | ROLE: DIRECTOR</p>
                            <p class="text-sm italic">
                                DESCRIPTION: A meditative film focusing on the choices and decision we regret, the indecision to act. IT will make your rethink your life choices.
                            </p>
                            <button class="px-3 py-1 bg-primary-red text-black font-semibold rounded-full text-xs hover:bg-white transition">
                                VIEW DETAILS
                            </button>
                        </div>
                    </div>
                </div>

                <!-- MOVIE CARD 7 - "Medhat: A life in picture" -->
                <div class="card-wrapper rounded-lg" tabindex="0" data-title="Medhat: A Life in Picture" data-year="2025" data-role="Self">
                    <div class="movie-card">
                        <img src="medhat.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=MEDHAT'" alt="Lost in the Neon Poster">
                    </div>
                    <!-- New Horizontal Detail Panel -->
                    <div class="horizontal-pop-up flex p-4 shadow-2xl">
                        <div class="w-2/5 h-full rounded-l-md overflow-hidden mr-4">
                             <img src="medhat.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=MEDHAT'" alt="Lost in the Neon Preview" class="w-full h-full object-cover">
                        </div>
                        <div class="w-3/5 space-y-2">
                            <h3 class="text-xl sm:text-2xl font-bold text-primary-red">Medhat: A life in picture</h3>
                            <p class="text-xs">2025</p>
                            <p class="text-sm italic">
                                Delves into the life of director Midhat. His life and philosphy when it comes to movie-making.
                            </p>
                            <button class="px-3 py-1 bg-primary-red text-black font-semibold rounded-full text-xs hover:bg-white transition">
                                VIEW DETAILS
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card-wrapper rounded-lg" tabindex="0" data-title="Stolen Laughter" data-year="2021" data-role="Main Villain">
                    <div class="movie-card">
                        <img src="stole.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=STOLEN'" alt="Psychological Neurosis in Pakistan">
                    </div>
                    <!-- New Horizontal Detail Panel -->
                    <div class="horizontal-pop-up flex p-4 shadow-2xl">
                        <div class="w-2/5 h-full rounded-l-md overflow-hidden mr-4">
                             <img src="stole.png" onerror="this.src='https://placehold.co/400x600/181818/E50914?text=STOLEN'" alt="Psychological Neurosis in Pakistan Preview" class="w-full h-full object-cover">
                        </div>
                        <div class="w-3/5 space-y-2">
                            <h3 class="text-xl sm:text-2xl font-bold text-primary-red">Stolen Laughter</h3>
                            <p class="text-xs">2021 | ROLE: MAIN VILLAIN</p>
                           <p class="text-sm italic">DESCRIPTION: A haunting exploration of stolen innocence — delving into the silent agony of child laborers trapped between survival and forgotten dreams.
</p>
                            <button class="px-3 py-1 bg-primary-red text-black font-semibold rounded-full text-xs hover:bg-white transition">
                                VIEW DETAILS
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer - UPDATED WITH THEME TOGGLE ALIGNED LEFT -->
        <footer class="py-6 px-0 text-xs text-white/50 flex justify-between items-center border-t border-primary-red/20">
            <!-- Theme Toggle Button (Left Side, Square, Icon Only) -->
            <button id="themeToggle" title="Toggle Theme" class="flex items-center justify-center w-8 h-8 text-white/70 hover:text-primary-red transition duration-300 rounded-md bg-white/10 hover:bg-white/20 border border-transparent hover:border-primary-red/50">
                <!-- Sun Icon (for Light Mode) -->
                <svg id="sunIcon" class="w-5 h-5 hidden text-yellow-500" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 10a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 00-.707-.293h-1.06a1 1 0 000 2h1.06a1 1 0 00.707-.293l.707-.707a1 1 0 00-1.414-1.414l-.707.707zM3 10a1 1 0 00-1 1v1a1 1 0 102 0v-1a1 1 0 00-1-1zm14 0a1 1 0 10-2 0v1a1 1 0 102 0v-1zM4.93 4.93a1 1 0 001.414 0l.707-.707a1 1 0 00-1.414-1.414L4.93 3.515a1 1 0 000 1.414zm12.02 12.02a1 1 0 000-1.414l-.707-.707a1 1 0 00-1.414 1.414l.707.707a1 1 0 001.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zM3 9a1 1 0 100 2h1a1 1 0 100-2H3zm12.071 7.071a1 1 0 00-1.414 0l-.707.707a1 1 0 101.414 1.414l.707-.707a1 1 0 000-1.414zM4.228 5.636a1 1 0 10-1.414 1.414L3.515 7.75a1 1 0 001.414-1.414L4.228 5.636z"></path></svg>
                <!-- Moon Icon (for Dark Mode) -->
                <svg id="moonIcon" class="w-5 h-5 text-blue-300" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.987a.75.75 0 001.06-1.06c-1.55-1.55-3.328-2.5-5.358-2.924a10.02 10.02 0 00-2.47-.384 10.02 10.02 0 00-2.47.384c-2.03.424-3.808 1.374-5.358 2.924a.75.75 0 001.06 1.06c1.233-1.233 2.766-2.09 4.54-2.58a10.02 10.02 0 00-1.444-2.81c.214-.07.432-.132.65-.18a8.5 8.5 0 014.288 0c.218.048.436.11.65.18a10.02 10.02 0 00-1.444 2.81c1.774.49 3.307 1.347 4.54 2.58z"></path></svg>
            </button>

            <!-- Copyright (Right Side) -->
            <p class="text-right">&copy; 2025 MEDHAT FILMS</p>
        </footer>
    </div>
  <script>
    // --- Global Elements ---
    const titleElement = document.getElementById('culturalTitle');
    const fixedNavbar = document.getElementById('fixedNavbar');
    const movieSearchInput = document.getElementById('movieSearchInput');
    const movieCards = document.querySelectorAll('.card-wrapper');
    const culturalTitle = document.getElementById('culturalTitle');
    const themeToggle = document.getElementById('themeToggle');
    const sunIcon = document.getElementById('sunIcon');
    const moonIcon = document.getElementById('moonIcon');
    const body = document.body;

    // --- Typewriter Effect Data ---
    const phrases = [
        { text: "Medhat メンハト", steps: 16, duration: 1500, color: 'var(--title-color)' },
        { text: "فیلم مدحت", steps: 4, duration: 1200, color: 'var(--accent-color)' },
        { text: "MEDHAT FILMS ", steps: 12, duration: 1800, color: 'var(--title-color)' }
    ];
    let phraseIndex = 0;

    function typePhrase(index) {
        if (index >= phrases.length) {
            titleElement.style.borderRight = 'none';
            return;
        }

        const { text, steps, duration, color } = phrases[index];

        // 1️⃣ Fade out the current text smoothly
        titleElement.style.animation = 'fade-out 0.4s ease forwards';
        setTimeout(() => {
            // 2️⃣ Prepare next phrase
            titleElement.style.color = color;
            titleElement.textContent = text;
            titleElement.style.width = '0';
            // Start typing animation
            titleElement.style.animation = `
                typing ${duration / 1000}s steps(${steps}, end) forwards,
                blink-caret 0.75s step-end infinite
            `;

            // 3️⃣ Move to next phrase after typing
            setTimeout(() => typePhrase(index + 1), duration + 800);
        }, 400); 
    }

    // --- Navbar Scroll & Search Script ---
    function handleScroll() {
        const titleBottom = culturalTitle.offsetTop + culturalTitle.offsetHeight;
        
        if (window.scrollY > titleBottom - 100) {
            fixedNavbar.classList.add('scrolled');
        } else {
            fixedNavbar.classList.remove('scrolled');
        }
    }

    function filterMovies() {
        const query = movieSearchInput.value.toLowerCase().trim();

        movieCards.forEach(card => {
            const title = card.getAttribute('data-title')?.toLowerCase() || '';
            const year = card.getAttribute('data-year') || '';
            const role = card.getAttribute('data-role')?.toLowerCase() || '';
            
            // Extract text content from the description paragraph 
            const descriptionElement = card.querySelector('.horizontal-pop-up p:last-child');
            const description = descriptionElement ? descriptionElement.textContent.toLowerCase() : '';

            const isMatch = title.includes(query) || 
                            year.includes(query) || 
                            role.includes(query) ||
                            description.includes(query);

            card.style.display = isMatch ? 'block' : 'none';
        });
    }

    // --- Theme Toggle Script ---
    const THEME_KEY = 'medhatFilmsTheme';

    function applyTheme(isLight) {
        if (isLight) {
            body.classList.add('light-mode');
            sunIcon.classList.remove('hidden');
            moonIcon.classList.add('hidden');
        } else {
            body.classList.remove('light-mode');
            sunIcon.classList.add('hidden');
            moonIcon.classList.remove('hidden');
        }
    }

    function toggleTheme() {
        const isLight = body.classList.contains('light-mode');
        const newThemeIsLight = !isLight;
        applyTheme(newThemeIsLight);
        // Save preference to localStorage
        try {
             localStorage.setItem(THEME_KEY, newThemeIsLight ? 'light' : 'dark');
        } catch (e) {
            console.error('LocalStorage is unavailable:', e);
        }
    }

    function loadTheme() {
        try {
            const savedTheme = localStorage.getItem(THEME_KEY);
            const prefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;

            // Default to dark, or respect system preference if no saved theme
            let isLight = false;
            if (savedTheme === 'light') {
                isLight = true;
            } else if (savedTheme === null && prefersLight) {
                isLight = true;
            }
            applyTheme(isLight);
        } catch (e) {
            console.error('Could not load theme preference:', e);
            applyTheme(false); // Default to dark mode if localStorage fails
        }
    }

    // --- Initialization ---
    window.onload = () => {
        // Load the saved theme preference first
        loadTheme();

        // Start the typewriter effect
        typePhrase(0);
                
        // Add listeners
        window.addEventListener('scroll', handleScroll);
        movieSearchInput.addEventListener('input', filterMovies);
        themeToggle.addEventListener('click', toggleTheme);

        // Ensure initial state is correct in case the user loads the page scrolled down
        handleScroll();
    };

    // Replace placeholder images with actual file paths if they exist
    // Also added onerror attribute with a simple placeholder URL for robustness
    document.querySelector('[data-title="In the Mood for Connection"] img:first-child').src = "dir.png";
    document.querySelector('[data-title="In the Mood for Connection"] .horizontal-pop-up img').src = "dir.png";
    document.querySelector('[data-title="American Prometheus"] img:first-child').src = "oppenheimer.png";
    document.querySelector('[data-title="American Prometheus"] .horizontal-pop-up img').src = "oppenheimer.png";
    document.querySelector('[data-title="A Life in Pardah"] img:first-child').src = "life.png";
    document.querySelector('[data-title="A Life in Pardah"] .horizontal-pop-up img').src = "life.png";
    document.querySelector('[data-title="Psychological Neurosis in Pakistan"] img:first-child').src = "psycho.png";
    document.querySelector('[data-title="Psychological Neurosis in Pakistan"] .horizontal-pop-up img').src = "psycho.png";
    document.querySelector('[data-title="RAT"] img:first-child').src = "rat.png";
    document.querySelector('[data-title="RAT"] .horizontal-pop-up img').src = "rat.png";
    document.querySelector('[data-title="REGRET"] img:first-child').src = "ragret.png";
    document.querySelector('[data-title="REGRET"] .horizontal-pop-up img').src = "ragret.png";
    document.querySelector('[data-title="Medhat: A Life in Picture"] img:first-child').src = "medhat.png";
    document.querySelector('[data-title="Medhat: A Life in Picture"] .horizontal-pop-up img').src = "medhat.png";
    document.querySelector('[data-title="Stolen Laughter"] img:first-child').src = "stole.png";
    document.querySelector('[data-title="Stolen Laughter"] .horizontal-pop-up img').src = "stole.png";
    </script>
       </body>
</html>

